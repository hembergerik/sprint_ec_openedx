<!DOCTYPE html>
<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
  <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
  <script src="pony_ea.js"></script>
  <link rel="stylesheet" href="pony_ea.css" />
  <script type="text/javascript" src="jscolor/jscolor.js"></script>
  <link href='//ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css' rel='stylesheet' type='text/css'>
</head>
<body>
  <div id = 'title'>
    <h1>Code Evolution Simulation</h1>
  </div>
  <div id='help'>The rows represent a population of individuals, with each square in a row representing a genome in an individual.<br><br>In each generation, there are tournaments between individuals where the individual with the highest fitness becomes part of the next generation. This is shown by the competitors shifting left, and the winner becoming part of the next generation. When the size of the next generation is the size of the current one, it replaces its predecessor.<br><br>There is also a mutation stage where each individual has a certain probability of having 1 of its genomes changed. This is shown by a square flipping to the opposite color.<br><br>Use the sliders to change the population size, genome size, probability of mutation, and how many individuals will compete in a tournament.<br><br>Use the additional settings to change how many generations the evolution will span, the colors of the genomes, and to toggle the animations.</div>
  <div id='getHelp'></div>
<div class='sides'>
  <div id='options'>
      Population size: <span class = 'info'>10</span> <div id = 'pop_size' class = 'slider'></div>
      Genome size: <span class='info'>8</span> <div id = 'genome_size' class = 'slider'></div>
      Mutation Probablity: <span class='info'>0.3</span> <div id = 'mut_prob' class = 'slider'></div>
      Tournament Size:<span class='info'>2</span>  <div id = 'tour_size' class = 'slider'></div>
  </div>
  <br>
  <div id='moreOptions'>
  	Generations: <input type='number' min="2" max="500" value= '10' id='generations'/><br>
    <span id='chooseColors'>
      Display Settings:<br>
      Square Size:<input type = 'text' id = 'chooseSize' value = '30'> px<br>
      Zero bit Color:<input class='color' id='chooseZero'><br>
      One bit Color:<input class='color' id='chooseOne'><br>
    </span><br>
      Animation Settings: <br>
      <input id="fightAnimCheck" type="checkbox" checked>Animate Competition; Duration <input id = 'fightAnimT' type = 'text' value = '300'> <br>
      <input id="mutateAnimCheck" type="checkbox" checked>Animate Mutation; Duration <input id = 'mutateAnimT' type = 'text' value = '300'>
    <br><button id='closeSettings'>Close Settings</button>  
  </div>
  <br>
  <span id='buttons'>
	  <button id='reload'>Start</button>
	  <button id ='step'>Step One Generation</button>
	  <button id = 'stop'>Stop</button>
	  <button id='moreSettings'>Additional Settings...</button>
	</span>
	<br>
	<div id='error'></div>
  <div id='info'><b>Generation:<br>
    AVG:<br>
    SD:<br>
    Highest Fitness:</b>
  </div>
 </div>

<div class='sides'>
	<div id='status'><span class='s' id='s0'>Tournament</span>&#8594;<span class='s' id='s1'>Mutation</span>&#8594;<span class='s' id='s2'>New Population</span></div>
	<div id = 'charts'>
		<table>
    <tr>
      <td>  Current Generation<br/></td>
      <td>  Next Generation</td>
    </tr>
    <tr>
      <td>
        <svg class="chart" id="d3chart"></svg>
      </td>
      <td>
        <svg class="chart" id="winners"></svg>
      </td>
    </tr>
  </table>
	</div>
</div>
</body>
